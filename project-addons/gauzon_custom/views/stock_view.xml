<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_picking_form" model="ir.ui.view">
        <field name="name">stock.picking.form</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <field name="scheduled_date" position="after">
                <field name="date_done" attrs="{'invisible': [('state', '!=', 'done')]}"/>
            </field>
            <xpath expr="//field[@name='move_lines']/tree/field[@name='product_id']" position="after">
                <field name="name"/>
                <field name="prod_supplier_codes"/>
            </xpath>
            <div name="button_box" position="inside">
                <button name="action_view_product_lst" type="object" class="oe_stat_button"
                    icon="fa-list">
                        <field name="product_ids_count" widget="statinfo" string="Products"/>
                </button>
            </div>
            <field name="move_lines" position="after">
                <div>
                    <group class="oe_left">
                        <field name="all_assigned" class="oe_inline"/>
                        <field name="forced" class="oe_inline" attrs="{'invisible': [('state', '=', 'done')]}"/>
                        <field name="product_uom_qty" class="oe_inline"/>
                        <field name="reserved_availability" class="oe_inline"/>
                        <field name="quantity_done" class="oe_inline"/>
                    </group>
                </div>
            </field>
            <field name="move_lines" position="before">
                <div>

                    <button class="oe_link oe_right"
                            context="{'model_dest': 'stock.move', 'field': 'product_uom_qty'}"
                            name="force_set_qty_done"  type="object" string="↳Copy qty. to done"
                            states="confirmed,assigned"
                            />
                    <button class="oe_link oe_right"
                            context="{'model_dest': 'stock.move', 'field': 'reserved_availability'}"
                            name="force_set_qty_done" type="object" string="↳Copy assigned to done"
                            attrs="{'invisible':['|',('reserved_availability', '=', 0), ('all_assigned','=',True)]}"/>
                    <button class="oe_link oe_right"
                            context="{'model_dest': 'stock.move', 'reset': True, 'field': 'quantity_done'}"
                            name="force_set_qty_done" type="object" string="↳Reset qties" attrs="{'invisible':['|',('quantity_done','=',0),('state', '=', 'done')]}"/>

                </div>
            </field>
            <xpath expr="//field[@name='move_lines']/tree/field[@name='reserved_availability']" position="after">
                <button name="force_set_qty_done"
                    string="↳Copy assigned to done"
                    type="object"
                    icon="fa-cart-arrow-down"
                    context="{'model_dest': 'stock.move', 'field': 'reserved_availability'}"
                    attrs="{'invisible': ['|', ('reserved_availability', '=', 0),('state', 'not in', ('assigned', 'partially_available'))]}"
                    options="{&quot;warn&quot;: true}"/>

            </xpath>
            <xpath expr="//field[@name='move_lines']/tree/field[@name='product_uom_qty']" position="after">
                <button name="force_set_qty_done"
                    string="↳Copy qty. to done"
                    type="object"
                    icon="fa-cart-arrow-down"
                    context="{'model_dest': 'stock.move', 'field': 'product_uom_qty'}"
                    attrs="{'invisible': [('state', 'not in', ('confirmed', 'partially_available'))]}"
                    options="{&quot;warn&quot;: true}"/>
            </xpath>
        </field>
    </record>

    <record id="view_picking_internal_search_inherit_add_gb_partner" model="ir.ui.view">
        <field name="name">stock.picking.search.inherit.add_gb_partner</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_internal_search"/>
        <field name="arch" type="xml">
            <filter name="picking_type" position="after">
                <filter string="Partner" domain="[]" context="{'group_by':'partner_id'}"/>
            </filter>
        </field>
    </record>

    <record id="vpicktree_add_date_done" model="ir.ui.view">
        <field name="name">stock.picking.tree.add_date_done</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.vpicktree"/>
        <field name="arch" type="xml">
            <field name="scheduled_date" position="after">
                <field name="date_done"/>
            </field>
        </field>
    </record>

    <record id="view_move_picking_tree_add_info" model="ir.ui.view">
        <field name="name">stock.move.tree.add_info</field>
        <field name="model">stock.move</field>
        <field name="inherit_id" ref="stock.view_move_picking_tree"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <field name="picking_id"/>
            </field>
            <field name="create_date" position="attributes">
                <attribute name="invisible">0</attribute>
            </field>
            <field name="date_expected" position="attributes">
                <attribute name="invisible">0</attribute>
            </field>
            <field name="location_id" position="attributes">
                <attribute name="invisible">0</attribute>
            </field>
            <field name="location_dest_id" position="attributes">
                <attribute name="invisible">0</attribute>
            </field>
        </field>
    </record>

</odoo>
